language: objective-c
osx_image: xcode10.1

notifications:
  email:
    recipients:
      - nathan.lanza@icloud.com
    on_success: always # default: change
    on_failure: always # default: always

env:
  global:
  matrix:
    - DESTINATION="platform=iOS Simulator,OS=12.1,id=63A0BA5F-3911-496F-BF2E-512830B4AD7F"

before_install:
  - gem update
  - gem install xcpretty -N || true
  - brew update; brew update; brew upgrade
  - brew install swiftlint || true
  - brew install xctool || true
  - pod repo update
  - set -o pipefail
script: 
  - xcodebuild -workspace nBack.xcworkspace -scheme nBack -destination "$DESTINATION" CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO build test | xcpretty -c
    # - xctool -workspace nWorkout.xcworkspace -scheme nWorkout -sdk iphonesimulator -arch i386 run-tests
    #- xctool -workspace nWorkout.xcworkspace -scheme nWorkout -sdk iphonesimulator -arch i386 run-tests -parallelize
